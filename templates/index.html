<hr>
<h3>Debug: Test Upload Endpoint</h3>
<form id="test-upload-form" method="POST" enctype="multipart/form-data" action="/test-upload">
  <input type="file" name="file" required>
  <button type="submit">Test Upload</button>
</form>
<div id="test-upload-result"></div>

<script>
  document.getElementById('test-upload-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    const form = e.target;
    const data = new FormData(form);
    const resultDiv = document.getElementById('test-upload-result');
    resultDiv.textContent = 'Uploading...';
    try {
      const res = await fetch('/test-upload', {
        method: 'POST',
        body: data
      });
      const text = await res.text();
      resultDiv.textContent = text;
    } catch (err) {
      resultDiv.textContent = 'Upload failed: ' + err;
    }
  });
</script>
